<a routerLink="/products" class="back-link">â† Back to products</a>

<section *ngIf="loading()" class="state shimmer">
  <div class="loading-card"></div>
</section>

<section *ngIf="error() as err" class="state error">{{ err }}</section>

<article *ngIf="!loading() && !error() && product() as p" class="detail">
  <div class="image">
    <img [src]="imageSrc()" [alt]="p.name" />
  </div>

  <div class="info">
    <h1 class="title">{{ p.name }}</h1>
    <div class="price">{{ formatPrice(p) }}</div>

    <p class="desc">{{ p.description }}</p>

    <div class="meta">
      <span class="badge" [class.ok]="p.available === true">
        {{ p.available === true ? 'In stock' : 'Out of stock' }}
      </span>
      <span class="category" *ngIf="p.category">Category: {{ p.category }}</span>
    </div>

    <div class="actions">
      <button class="btn" (click)="addToCart()" [disabled]="!p.available" [class.disabled]="!p.available">
        ğŸ›’ Add to cart
      </button>
      <a class="btn ghost" routerLink="/products">â† Continue shopping</a>
    </div>
  </div>
</article>

<div class="toast success" *ngIf="addedToCart()">
  âœ… Added to cart successfully!
</div>